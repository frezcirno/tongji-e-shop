# Tongji-e-shop - **çº¯åŸç”Ÿ**å®ç°åŸºæœ¬ç”µå•†å¹³å°

> ğŸŒ [åŒæµå•†åŸ | tongji-e-shop](https://tongji-e-shop.herokuapp.com/)

> ğŸ¥ [å±•ç¤ºè§†é¢‘ | Intro Video](./video.mp4)

[TOC]

---

## å®ç°åŠŸèƒ½

- å•†åŸé¦–é¡µ

  - **åŒå±‚å¯¼èˆªæ  (å¤æ‚ JS ç»„ä»¶)**

    - é¡µé¢å¯¼èˆª
    - å•†å“åˆ†ç±»å¯¼èˆª
    - è´­ç‰©è½¦æ•°é‡æŒ‡ç¤ºç¯
    - å·²ç™»å½•/æœªç™»å½•æ˜¾ç¤ºä¸åŒå†…å®¹

  - **é¦–é¡µè½®æ’­å›¾ (å¤æ‚ JS ç»„ä»¶)**

  - å•†å“å±•ç¤º

    - å•†å“ç¼©ç•¥å›¾, åç§°, æè¿°, ä»·æ ¼
    - å¡ç‰‡å¼å±•ç¤ºé£æ ¼
    - **æµ®åŠ¨æ¸å˜æ•ˆæœ**

- å•†å“è¯¦æƒ…é¡µ

  - åŸºæœ¬ä¿¡æ¯

    - å•†å“å¤§å›¾, åç§°, æè¿°, ä»·æ ¼
    - å•†å“è¯¦ç»†å‚æ•°(é¡µé¢ä¸»ä½“)
    - ä½¿ç”¨ hashTag - å¿«é€Ÿè·³è½¬

  - åŠ å…¥è´­ç‰©è½¦

    - æœªç™»é™†: è·³è½¬åˆ°ç™»å½•é¡µ
    - å·²ç™»é™†: è´­ç‰©è½¦+1

  - ç«‹å³è´­ä¹°

    - æœªç™»é™†: è·³è½¬åˆ°ç™»å½•é¡µ
    - å·²ç™»é™†: è·³è½¬åˆ°è®¢å•é¡µ

- æ³¨å†Œ / ç™»å½•é¡µ

  - éç©ºç›‘æµ‹
  - äºŒæ¬¡å¯†ç ç¡®è®¤
  - **é‡å¤æ£€æµ‹** - é’ˆå¯¹ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·
  - **æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ä¹‹å‰è®¿é—®é¡µé¢**

- æŸ¥çœ‹è´­ç‰©è½¦

  - åŸºæœ¬ä¿¡æ¯åˆ—è¡¨

    - å•†å“ç¼©ç•¥å›¾
    - åç§°, æè¿°, ä»·æ ¼

  - è´­ç‰©è½¦è°ƒæ•´

    - æ‰¹é‡é€‰æ‹©
    - æ•°é‡å¾®è°ƒ
    - ä»è´­ç‰©è½¦ä¸­åˆ é™¤
    - **è‡ªåŠ¨æ›´æ–°æ€»ä»·æ ¼**

  - ç«‹å³ç»“ç®— (æ”¯ä»˜è¿‡ç¨‹çœç•¥)

- æŸ¥çœ‹å†å²è®¢å•

  - æŸ¥çœ‹æˆ‘çš„è´­ç‰©è®°å½• (ä¸å¯ä¿®æ”¹)

- **æ•°æ®æŒä¹…åŒ–**

  > åç«¯ è½»é‡çº§ Python Web æ¡†æ¶ [Flask](https://flask.palletsprojects.com/en/1.1.x/)

  > æ•°æ®åº“ [MySQL](https://www.mysql.com/)

  > ORM æ¡†æ¶ [Flask-SQLAlchemy](https://flask-sqlalchemy.palletsprojects.com/en/2.x/)

- **è¿œç¨‹éƒ¨ç½²**

  > éƒ¨ç½²åœ°å€ https://tongji-e-shop.herokuapp.com/

## ç•Œé¢è®¾è®¡

### é¦–é¡µ

<img src="./images/index0.png" width="85%;" />

#### è½®æ’­å›¾ç»†èŠ‚

<img src="./images/index1.png" width="85%;" />

#### å•†å“åˆ†ç±»

<img src="./images/index2.png" width="85%;" />

#### å•†å“å±•ç¤º

<img src="./images/index3.png" width="85%;" />

#### å¤–éƒ¨é“¾æ¥

<img src="./images/index4.png" width="85%;" />

---

### æ³¨å†Œ / ç™»é™†

#### æ³¨å†Œ

<img src="./images/register.png" width="85%;" />

#### ç™»é™†

<img src="./images/login.png" width="85%;" />

---

### å•†å“è´­ä¹°

<img src="./images/product.png" width="85%;" />

---

### è´­ç‰©è½¦

<img src="./images/cart.png" width="85%;" />

#### å†å²è®¢å•

<img src="./images/order.png" width="85%;" />

## å¼€å‘å·¥å…·

- æ“ä½œç³»ç»Ÿ

  - å¼€å‘ç¯å¢ƒ: Windows 10
  - ç”Ÿäº§ç¯å¢ƒ: Ubuntu 18.04 LTS

- IDE

  - Visual Studio Code

- å¼€å‘å·¥å…·

  - HTML5
  - CSS3, **Sass**
  - JavaScript, **Gulp**
  - **Python**

- æ•°æ®åº“

  - **MariaDB** (MySQL)

- æ¡†æ¶æŠ€æœ¯

  - å‰ç«¯: åŸç”Ÿ HTML + CSS + JavaScript
  - åç«¯: Flask + SQLAlchemy + MySQL

## éƒ¨åˆ†å®ç°

### å‰ç«¯

#### åŸç”Ÿ Ajax å°è£…

```javascript
function ajax(options = {}) {
    let { url, type, data, success, fail, contentType, rawdata } = options;
    type = (type || "GET").toUpperCase();
    contentType = contentType || "application/x-www-form-urlencoded"
    let params = rawdata || toParams(data);

    let xhr = new XMLHttpRequest();
    xhr.onreadystatechange = () => {
        if (xhr.readyState === 4) {
            if (xhr.status >= 200 && xhr.status < 300) {
                success && success(JSON.parse(xhr.responseText));
            } else if (xhr.status >= 400) {
                fail && fail(JSON.parse(xhr.responseText));
            }
        }
    };

    if (type === "GET") {
        xhr.open(type, url + (params || '?') + params);
        xhr.send();
    } else {
        xhr.open(type, url);
        xhr.setRequestHeader('Content-Type', contentType);
        xhr.send(params);
    }
}
```

---

### åç«¯

#### Controller

```python
@app.route('/api/login', methods=["POST"])
def api_login():
    email = request.form.get('email')
    password = request.form.get('password')
    user = User.query.filter(User.email == email).first()
    if user and user.password == password:
        session['id'] = user._id
        return jsonify({'status': 'ok', 'location': url_for('index')})
    else:
        return jsonify({'status': 'error'}), 400
```

---

### æ•°æ®åº“

#### ORM

```python
class Item(db.Model):
    '''å•†å“'''
    __tablename__ = 'item'
    _id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(255), nullable=False)
    price = db.Column(db.Float, nullable=False)
    image = db.Column(db.Text)
    desc = db.Column(db.Text)
    time = db.Column(db.DateTime, default=datetime.now, onupdate=datetime.now)
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ app.py
â”œâ”€â”€ data.sql
â”œâ”€â”€ db.mwb
â”œâ”€â”€ db.sql
â”œâ”€â”€ gulpfile.js
â”œâ”€â”€ node_modules
â”‚Â Â  â””â”€â”€ ...
â”œâ”€â”€ images
â”‚Â Â  â””â”€â”€ ...
â”œâ”€â”€ static
â”‚Â Â  â”œâ”€â”€ css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ common.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ footer.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ header.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ login.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ order.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ register.css
â”‚Â Â  â”‚Â Â  â””â”€â”€ span.css
â”‚Â Â  â”œâ”€â”€ image
â”‚Â Â  â”‚Â Â  â””â”€â”€ ...
â”‚Â Â  â””â”€â”€ js
â”‚Â Â      â”œâ”€â”€ ajax.js
â”‚Â Â      â”œâ”€â”€ cart.js
â”‚Â Â      â”œâ”€â”€ header.js
â”‚Â Â      â”œâ”€â”€ index.js
â”‚Â Â      â”œâ”€â”€ login.js
â”‚Â Â      â”œâ”€â”€ product.js
â”‚Â Â      â””â”€â”€ register.js
â””â”€â”€ templates
    â”œâ”€â”€ cart.html
    â”œâ”€â”€ index.html
    â”œâ”€â”€ login.html
    â”œâ”€â”€ order.html
    â”œâ”€â”€ product.html
    â””â”€â”€ register.html
```
